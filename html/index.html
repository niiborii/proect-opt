<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>STUCK — Магазин ПК-игр</title>
  <link rel="stylesheet" href="../css/style.css" />
</head>
<body>
<header>
  <!-- Header будет загружен динамически через JavaScript -->
</header>

<<main>
  <section class="hero">
    <div class="cont">
      <div class="hero-content">
        <h1>Лучшие ПК-игры по лучшим ценам</h1>
        <p>Откройте мир захватывающих приключений с нашей коллекцией игр</p>
        <a href="#catalog" class="btn-primary">Перейти к каталогу</a>
      </div>
    </div>
  </section>

  <section id="new" class="catalog-section">
    <div class="cont">
      <h2>Новинки</h2>
      <div class="games-grid" id="newGamesGrid">
        <!-- Новинки будут загружены через JavaScript -->
      </div>
    </div>
  </section>

  <section id="catalog" class="catalog-section">
    <div class="cont">
      <h2>Каталог игр</h2>
      <div class="games-grid" id="gamesGrid">
        <!-- Игры будут загружены через JavaScript -->
      </div>
    </div>
  </section>

  <section id="sales" class="catalog-section">
    <div class="cont">
      <h2>Акции</h2>
      <div class="games-grid" id="salesGamesGrid">
        <!-- Игры по акции будут загружены через JavaScript -->
      </div>
    </div>
  </section>
</main>

<footer>
  <!-- Footer будет загружен динамически через JavaScript -->
</footer>

<script src="../js/bundle.js"></script>
<script src="../js/components.js"></script>
<script src="../js/script.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    loadGamesForCatalog();
  });

  async function loadGamesForCatalog() {
    const games = await DB.getCatalogue();
    
    // Отображаем все игры в основном каталоге
    displayGames(games, 'gamesGrid');
    
    // Отображаем первые 3 игры как новинки
    displayGames(games.slice(0, 3), 'newGamesGrid');
    
    // Отображаем игры со скидкой (например, цена < 2500)
    const saleGames = games.filter(game => game.price < 2500);
    displayGames(saleGames.length > 0 ? saleGames : games.slice(0, 2), 'salesGamesGrid');
  }

  function displayGames(games, elementId) {
    const gamesGrid = document.getElementById(elementId);
    
    if (games.length === 0) {
      gamesGrid.innerHTML = '<p>Игры не найдены</p>';
      return;
    }
    
    gamesGrid.innerHTML = games.map(game => `
      <div class="game-card">
        <img src="${game.cover}" alt="${game.title}" class="game-cover">
        <div class="game-info">
          <h3>${game.title}</h3>
          <p class="price">${game.price} ₽</p>
          <a href="game-details.html?id=${game.id}" class="btn-secondary">Подробнее</a>
        </div>
      </div>
    `).join('');
  }
</script>
</body>
</html>